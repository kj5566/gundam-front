import{a as p,ar as m,S as f,o as e,al as s,d as r,w as i,e as y,f as d,b as t,X as _,am as h,aj as n}from"./index.c2e833b5.js";import{V as w}from"./VTable.8b367126.js";const V={class:"m-10",id:"orders"},x=t("h1",{class:"text-center"},"\u8A02\u55AE\u7BA1\u7406",-1),g=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"\u65E5\u671F"),t("th",null,"\u4F7F\u7528\u8005"),t("th",null,"\u91D1\u984D"),t("th",null,"\u5546\u54C1")])],-1),b={__name:"OrdersView",setup(k){const o=p([]);return(async()=>{try{const{data:c}=await m.get("/orders/all");o.push(...c.result.map(u=>(u.totalPrice=u.products.reduce((l,a)=>l+a.p_id.price*a.quantity,0),u)))}catch{f.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u8A02\u55AE\u5931\u6557"})}})(),(c,u)=>(e(),s("div",V,[r(y,null,{default:i(()=>[r(d,{cols:"12"},{default:i(()=>[x]),_:1}),r(d,{cols:"12"},{default:i(()=>[r(w,null,{default:i(()=>[g,t("tbody",null,[(e(!0),s(_,null,h(o,l=>(e(),s("tr",{key:l._id},[t("td",null,n(l._id),1),t("td",null,n(new Date(l.date).toLocaleDateString()),1),t("td",null,n(l.u_id.account),1),t("td",null,n(l.totalPrice),1),t("td",null,[t("ul",null,[(e(!0),s(_,null,h(l.products,a=>(e(),s("li",{key:a._id},n(a.quantity+" \u500B "+a.p_id.name),1))),128))])])]))),128))])]),_:1})]),_:1})]),_:1})]))}};export{b as default};
